# Project E-Commerce Backend System

## üîß ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå
- configs
- controllers
- middlewares
- models
- routes
- servies

## üìÖ Development Log
- [Day 1] 
    - ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÅ‡∏•‡∏∞‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Express jsonwebtoken dotenv bcryptjs body-parser cors helmet express-rate-limit
    - ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• SQL ‡πÑ‡∏î‡πâ‡πÅ‡∏Å‡πà orders , order_items , products , users 
    - ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• user,password,port ‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏ß‡πâ‡πÉ‡∏ô‡πÑ‡∏ü‡∏•‡πå .env
    - db.js ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
    - ‡∏™‡∏£‡πâ‡∏≤‡∏á usermodels ‡∏™‡∏£‡πâ‡∏≤‡∏á/‡∏•‡∏ö/‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ user
- [Day 2] 
    - ‡∏™‡∏£‡πâ‡∏≤‡∏á AuthController ‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡πÅ‡∏•‡∏∞ login
    - ‡∏™‡∏£‡πâ‡∏≤‡∏á AuthMiddleware ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö token ‡πÅ‡∏•‡∏∞ role 
    - ‡∏™‡∏£‡πâ‡∏≤‡∏á routes ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö auth 
    - ‡∏™‡∏£‡πâ‡∏≤‡∏á index.js
- [Day 3]
    - ‡∏™‡∏£‡πâ‡∏≤‡∏á middleware rateLimit ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏¢‡∏¥‡∏á IP ‡∏ã‡πâ‡∏≥‡πÜ
    - ‡∏™‡∏£‡πâ‡∏≤‡∏á model > controller > middleware update role admin
    
- [Day 4]
    - ‡∏™‡∏£‡πâ‡∏≤‡∏á orderModel CRUD order ‡πÅ‡∏•‡∏∞‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏î‡∏π order ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏ô‡∏Ç‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ô‡∏ã‡∏∑‡πâ‡∏≠
    - ‡∏™‡∏£‡πâ‡∏≤‡∏á ProductModel CRUD 
    - ‡∏™‡∏£‡πâ‡∏≤‡∏á ProductController ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ ‡πÅ‡∏•‡∏∞‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏î‡∏π products ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏Ç‡∏≠‡∏á seller (controll ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏™‡∏£‡πá‡∏à)
    - ‡∏™‡∏£‡πâ‡∏≤‡∏á Route for add new product successfully

- [Day 5]
    - ‡∏™‡∏£‡πâ‡∏≤‡∏á model / controller/ Route CRUD product

- [Day 6]
    - ‡∏™‡∏£‡πâ‡∏≤‡∏á model / controller / route CRUD order

## üìÖ Fix Log
1. ‡πÉ‡∏ä‡πâ await pool.query()  ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ 
    - ‡∏•‡∏á mysql2 ‡∏û‡∏¥‡∏°‡∏û‡πå npm install mysql2 
2. ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å‡πÑ‡∏ü‡∏•‡πå env ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ 
    - ‡∏ï‡πâ‡∏≠‡∏á require("dotenv").config();
3. token ‡πÑ‡∏ß‡πâ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ‡∏à‡∏≤‡∏Å JWT sign  token = jwt.sign(
            {id:result.id,name:result.name,role:result.role},JWT_secret,{expiresIn:"1h"})
    ‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ ‡πÄ‡∏ä‡πà‡∏ô req.user.id 
4. ‡πÉ‡∏ä‡πâ HTTP code ‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á ‡πÄ‡∏ä‡πà‡∏ô 
    - 200 OK : Get data ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
    - 201 Create : Create ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
    - 404 not found : ‡∏´‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡πÄ‡∏à‡∏≠
5. ‡πÄ‡∏ß‡∏•‡∏≤ select ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏°‡∏≤‡∏à‡∏≤‡∏Å sql ‡∏î‡πâ‡∏ß‡∏¢ pool.query ‡∏à‡∏∞‡πÑ‡∏î‡πâ‡∏°‡∏≤‡πÄ‡∏õ‡πá‡∏ô array ‡∏ï‡πâ‡∏≠‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏ß‡∏á‡πÄ‡∏•‡πá‡∏ö‡∏Å‡πâ‡∏≤‡∏°‡∏õ‡∏π ‡πÄ‡∏ä‡πà‡∏ô [result] 
6. ‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡πà‡∏≤ pool.query ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏°‡∏≤‡πÅ‡∏•‡πâ‡∏ß ‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏´‡∏° ‡πÉ‡∏´‡πâ‡πÄ‡∏ä‡πá‡∏Ñ‡∏î‡πâ‡∏ß‡∏¢ Product.length === 0 ‡πÄ‡∏û‡∏£‡∏≤‡∏∞ pool.query() ‡∏à‡∏∞‡∏Ñ‡∏∑‡∏ô‡∏Ñ‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô array ‡πÄ‡∏™‡∏°‡∏≠
‡πÄ‡∏ä‡πà‡∏ô ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡πÄ‡∏à‡∏≠ product ‚Üí result = []
7. ‡∏≠‡∏¢‡πà‡∏≤ return result[0] ‡∏ñ‡πâ‡∏≤ search ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏°‡∏µ‡∏´‡∏•‡∏≤‡∏¢‡∏ï‡∏±‡∏ß
8. search ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô sql ‡πÅ‡∏•‡πâ‡∏ß‡πÑ‡∏°‡πà‡πÄ‡∏à‡∏≠ ‡πÅ‡∏Å‡πâ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏ä‡πà‡∏≠‡∏á‡∏ß‡πà‡∏≤‡∏á‡∏≠‡∏≠‡∏Å
    - let sql = "SELECT * FROM e_commerce_system.products WHERE 1=1 ";
        let param = [];
        if(name) {
            const trimmed = name.trim();   // ‡∏ï‡∏±‡∏î‡∏ä‡πà‡∏≠‡∏á‡∏ß‡πà‡∏≤‡∏á‡∏´‡∏±‡∏ß‡∏ó‡πâ‡∏≤‡∏¢
            sql += " AND name LIKE ?";
            param.push(`%${trimmed}%`);
        }
9. ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô routes ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ rount ‡∏ó‡∏µ‡πà‡∏°‡∏µ dynamic ‡∏Ñ‡∏ß‡∏£‡πÑ‡∏ß‡πâ‡∏ó‡πâ‡∏≤‡∏¢‡πÜ ‡πÄ‡∏û‡∏£‡∏≤‡∏∞ express ‡∏≠‡πà‡∏≤‡∏ô‡∏à‡∏≤‡∏Å‡∏ö‡∏ô‡∏•‡∏á‡∏•‡πà‡∏≤‡∏á ‡πÄ‡∏ä‡πà‡∏ô
    router.get("/:id", ... );
    router.get("/search", ... );
    ‡∏à‡∏∞‡∏≠‡πà‡∏≤‡∏ô :id ‡∏Å‡πà‡∏≠‡∏ô ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÑ‡∏°‡πà‡πÄ‡∏à‡∏≠‡πÄ‡∏™‡πâ‡∏ô /search 
    - ‡πÅ‡∏Å‡πâ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏•‡∏±‡∏ö‡∏ó‡∏µ‡πà‡πÉ‡∏´‡πâ search ‡∏Ç‡∏∂‡πâ‡∏ô‡∏Å‡πà‡∏≠‡∏ô
10. ‡πÄ‡∏ß‡∏•‡∏≤ return result.insertId  ‡∏à‡∏∞‡πÑ‡∏î‡πâ‡∏Ñ‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô id ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡∏∂‡πâ‡∏ô‡∏°‡∏≤ ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà array  
    - ‡∏ï‡∏≠‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏ï‡∏¥‡∏° [0] ‡∏ï‡∏≤‡∏°‡∏´‡∏•‡∏±‡∏á ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ‡∏ï‡∏£‡∏á‡πÜ‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢ ‡πÄ‡∏ä‡πà‡∏ô  
    const newOrder = await orders.CreateOrder(customerID,totalPrice); //newOrder return insertId
    const addOrderItem = await orders.AddOrderItem(newOrder,productID,detailProduct[0].price,quantity) //‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢
11. return delOrder.affectedRows, delOrder.affectedRows; ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ 
    - ‡πÉ‡∏ô JavaScript ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏´‡∏°‡∏≤‡∏¢ , (comma operator) ‡∏à‡∏∞ ‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô‡∏Ñ‡πà‡∏≤‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ï‡∏±‡∏ß‡∏´‡∏•‡∏±‡∏á‡∏™‡∏∏‡∏î‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô 
    - ‡πÉ‡∏´‡πâ return ‡πÄ‡∏õ‡πá‡∏ô object ‡∏´‡∏£‡∏∑‡∏≠ array ‡πÄ‡∏ä‡πà‡∏ô 
    return {
        deletedOrders: delOrder.affectedRows,
        deletedOrderItems: delOrderItem.affectedRows
    };

